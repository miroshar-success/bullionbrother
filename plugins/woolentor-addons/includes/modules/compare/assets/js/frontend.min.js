!function(e){"use strict";var a=e("body"),o=e(".htcompare-popup");function t(a){e(".htcompare-table").length>0&&(e(".htcompare-table").replaceWith(a.table),e(".evercompare-copy-link").on("click",function(a){n(e(this).closest(".ever-compare-shareable-link").find(".evercompare-share-link"),this)}))}function n(a,o){var t=e("<input>");e("body").append(t),t.val(e(a).text()).select(),document.execCommand("copy"),t.remove(),e(o).text(e(o).data("copytext")),setTimeout(function(){e(o).text(e(o).data("btntext"))},1e3)}a.on("click","a.htcompare-btn",function(n){var r=e(this),c=r.data("product_id"),s=r.data("added-text");if("yes"===evercompare.popup){if(n.preventDefault(),r.hasClass("added"))return a.find(".htcompare-popup").addClass("open"),!0}else if(r.hasClass("added"))return!0;n.preventDefault(),r.addClass("loading"),e.ajax({url:evercompare.ajaxurl,data:{action:"ever_compare_add_to_compare",id:c},dataType:"json",method:"GET",success:function(e){e.table?(t(e),o.addClass("open")):console.log("Something wrong loading compare data")},error:function(e){console.log("Something wrong with AJAX response.")},complete:function(){r.removeClass("loading").addClass("added"),r.html('<span class="htcompare-btn-text">'+s+"</span>")}})}),a.on("click","a.htcompare-remove",function(a){var o=e(".htcompare-table");a.preventDefault();var n=e(this),r=n.data("product_id");o.addClass("loading"),n.addClass("loading"),jQuery.ajax({url:evercompare.ajaxurl,data:{action:"ever_compare_remove_from_compare",id:r},dataType:"json",method:"GET",success:function(e){e.table?t(e):console.log("Something wrong loading compare data")},error:function(e){console.log("Something wrong with AJAX response.")},complete:function(){o.removeClass("loading"),n.addClass("loading")}})}),a.on("click",".htcompare-popup-close",function(e){o.removeClass("open")}),e(".evercompare-copy-link").on("click",function(a){n(e(this).closest(".ever-compare-shareable-link").find(".evercompare-share-link"),this)})}(jQuery);